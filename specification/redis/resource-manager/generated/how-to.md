# How-To

## Building the module
To build, run the `build-module.ps1` at the root of the module directory. This will generate the proxy script cmdlets that are the cmdlets being exported by this module. After the build completes, the proxy script cmdlets will be output to the `exports` folder. To read more about the proxy script cmdlets, look at the [readme.md](./exports/readme.md) in the `exports` folder.

## Adding custom cmdlets
To add cmdlets that were not generated by the REST specification, use the `custom` folder. This folder allows you to add handwritten `.ps1` and `.cs` files. Currently, we support using `.ps1` scripts as top-level (exported) cmdlets and `.cs` files as low-level (variants) cmdlets that the exported script cmdlets call. We do not support exporting any `.cs` (dll) cmdlets as they are not supported by our Azure profile-loading framework. To read more about custom cmdlets, look at the [readme.md](./custom/readme.md) in the `custom` folder.

## Adding documentation
To create documentation, we use [platyPS](https://github.com/PowerShell/platyPS). To generate documentation, run the `generate-help.ps1` script. This will look at the documentation comments in the generated and custom cmdlets and types, and create `.md` files into the `docs` folder. Additionally, this will pull in any examples in the `examples` folder and add them to the generated help documents. To read more about examples, look at the [readme.md](./examples/readme.md) in the `examples` folder. To read more about documentation, look at the [readme.md](./docs/readme.md) in the `docs` folder.

## Testing the module
To test the cmdlets (both generated and custom), we use [Pester](https://github.com/pester/Pester). Tests scripts (`.ps1`) should be added to the `test` folder. To execute the Pester tests, run the `test-module.ps1` script. This will run all tests in `Playback` mode within the `test` folder. To read more about testing cmdlets, look at the [readme.md](./test/readme.md) in the `test` folder.

## Packing the module
To pack the module (for distribution), run the `pack-module.ps1` script. This will take the contents of the `bin`, `exports`, and `custom` directories to create a `.nupkg`. The structure of the `.nupkg` is created so it can be loaded part of a [PSRepository](https://docs.microsoft.com/en-us/powershell/module/powershellget/register-psrepository). Additionally, this package is in a format for distribution to the [PSGallery](https://www.powershellgallery.com/). Please contact the Azure PowerShell team for publishing.